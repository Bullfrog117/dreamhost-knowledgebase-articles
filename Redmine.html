<div style="background-color: #fee; margin: 1em; padding: 10px; border: 1px solid #aaa; text-align: center;"><strong>WARNING: POSSIBLE OUTDATED INFORMATION!</strong><br /><span style="font-size: 90%;">DreamHost does not directly support any of the features described on this page and is not responsible for keeping this content updated or accurate. Use at your own risk! <br />There may be additional information on the <a title="Talk:Redmine" href="http://wiki.dreamhost.com/Talk:Redmine"> talk page</a>.</span></div>
<div>
<table style="text-align: center; background-color: #ffefef; border: 1px solid #FF9F9F; padding: 0px; margin: 0 auto 2em auto; width: 80%;">
<tbody>
<tr>
<td><strong>The instructions provided in this article or section are considered advanced.</strong><br />
<p>You are expected to be knowledgeable in the UNIX shell.<br /> <span style="font-size: 1.1em; text-decoration: blink;"><em>Support for these instructions is <strong>not available</strong> from DreamHost tech support.</em></span><br /> <span style="font-size: 1.1em;"><strong><em>Server changes performed by DreamHost may break your modifications. You, as the user, are responsible for troubleshooting and resolving issues with your customizations.</em></strong> </span><strong><em><br /></em></strong></p>
</td>
</tr>
</tbody>
</table>
</div>
<div>
<table style="text-align: center; background-color: #efefff; border: 1px solid #9F9FFF; padding: 0px; margin: 0 auto 2em auto; width: 80%;">
<tbody>
<tr>
<td><strong>The instructions provided in this article or section require <a title="Shell" href="http://wiki.dreamhost.com/Shell">shell</a> access unless otherwise stated.</strong><br />
<p>You can use the <a title="PuTTY" href="http://wiki.dreamhost.com/PuTTY">PuTTY</a> client on Windows, or <a title="SSH" href="http://wiki.dreamhost.com/SSH">SSH</a> on <a title="Category:UNIX" href="http://wiki.dreamhost.com/Category:UNIX">UNIX</a> and UNIX-like systems such as Linux or Mac OS X.<br />Your account must be configured for shell access in the <a class="mw-redirect" title="Control Panel" href="http://wiki.dreamhost.com/Control_Panel">Control Panel</a>.<br />More information may be available on the article's <a title="Talk:Redmine" href="http://wiki.dreamhost.com/Talk:Redmine">talk page</a>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div style="float: right;">
<div id="toc" class="toc">
<div id="toctitle">
<h2>Contents</h2>
</div>
</div>
</div>
<div style="float: right;">
<div id="toc" class="toc">
<ul>
<li class="toclevel-1 tocsection-1"><a href="http://wiki.dreamhost.com/Redmine#Initial_installation"><span class="tocnumber">1</span> <span class="toctext">Initial installation</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="http://wiki.dreamhost.com/Redmine#Create_a_new_subdomain_and_a_new_MySQL_database"><span class="tocnumber">1.1</span> <span class="toctext">Create a new subdomain and a new MySQL database</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="http://wiki.dreamhost.com/Redmine#Get_the_Redmine_source_code"><span class="tocnumber">1.2</span> <span class="toctext">Get the Redmine source code</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="http://wiki.dreamhost.com/Redmine#Alternative_download_methods"><span class="tocnumber">1.2.1</span> <span class="toctext">Alternative download methods</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-5"><a href="http://wiki.dreamhost.com/Redmine#Configure_the_Redmine_installation"><span class="tocnumber">1.3</span> <span class="toctext">Configure the Redmine installation</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="http://wiki.dreamhost.com/Redmine#Configure_the_FCGI_dispatcher"><span class="tocnumber">1.4</span> <span class="toctext">Configure the FCGI dispatcher</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="http://wiki.dreamhost.com/Redmine#Configuring_a_repository"><span class="tocnumber">2</span> <span class="toctext">Configuring a repository</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="http://wiki.dreamhost.com/Redmine#Configuring_email"><span class="tocnumber">3</span> <span class="toctext">Configuring email</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="http://wiki.dreamhost.com/Redmine#sendmail"><span class="tocnumber">3.1</span> <span class="toctext">sendmail</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="http://wiki.dreamhost.com/Redmine#GMail.2FGoogle_Apps"><span class="tocnumber">3.2</span> <span class="toctext">GMail/Google Apps</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="http://wiki.dreamhost.com/Redmine#Restart_Passenger"><span class="tocnumber">3.3</span> <span class="toctext">Restart Passenger</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="http://wiki.dreamhost.com/Redmine#How_to_Fix_Redmine_if_Dreamhost_Upgrades_to_a_Newer_Version_of_Rails"><span class="tocnumber">4</span> <span class="toctext">How to Fix Redmine if Dreamhost Upgrades to a Newer Version of Rails</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="http://wiki.dreamhost.com/Redmine#Fixing_the_problems_in_browsing_a_Mercurial_repository"><span class="tocnumber">5</span> <span class="toctext">Fixing the problems in browsing a Mercurial repository</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="http://wiki.dreamhost.com/Redmine#Alternative_Packages"><span class="tocnumber">6</span> <span class="toctext">Alternative Packages</span></a></li>
</ul>
</div>
</div>
<p>This article describes how to install <a class="external text" href="http://www.redmine.org" rel="nofollow">Redmine</a>, an integrated Wiki and Issue Tracker with support for <a title="Subversion" href="http://wiki.dreamhost.com/Subversion">Subversion</a> and <a title="Git" href="http://wiki.dreamhost.com/Git">Git</a>. Version &gt;= 0.9 is assumed.</p>
<p><strong>Note:</strong> The most up-to-date instructions on how to install Redmine are available <a class="external text" href="http://www.redmine.org/projects/redmine/wiki/RedmineInstall" rel="nofollow">here</a>. You may just want to follow those instructions once you get <a title="Ruby on Rails" href="http://wiki.dreamhost.com/Ruby_on_Rails">Ruby on Rails</a> set up on a subdomain and a <a title="MySQL" href="http://wiki.dreamhost.com/MySQL">MySQL</a> database created. (If you're on shared hosting, don't run the WEBrick test server mentioned in the directions; it's against Dreamhost's policy.)</p>
<p>For help on using the shell you can take a look at the <a title="UNIX commands" href="http://wiki.dreamhost.com/UNIX_commands">UNIX commands</a> and you can also get help on <a title="UNIX commands" href="http://wiki.dreamhost.com/UNIX_commands#Changing_directories">changing directories</a>. If you want to save the output for debugging and support then you can look at the <a class="mw-redirect" title="Fundamental Unix Commands" href="http://wiki.dreamhost.com/Fundamental_Unix_Commands#.3E_-_redirection_symbol">Redirection Symbol</a>.</p>
<h2><span id="Initial_installation" class="mw-headline">Initial installation</span></h2>
<p>This details installation of Redmine 2.0 using FCGI (see also <a class="external free" href="http://wiki.dreamhost.com/Rails_3#Using_FastCGI" rel="nofollow">http://wiki.dreamhost.com/Rails_3#Using_FastCGI</a>). Use FCGI and NOT Passenger since Dreamhost's current Passenger version is out of date. (<em>May 19 2012 Passenger is currently v2.2.9, which was released in Jan 2010</em>).</p>
<h3><span id="Create_a_new_subdomain_and_a_new_MySQL_database" class="mw-headline">Create a new subdomain and a new MySQL database</span></h3>
<ol>
<li>From the Dreamhost control panel, create a new subdomain for Redmine such as <em>yoursubdomain.yourdomain.com</em>. (If you're attempting to install Redmine anywhere other than the subdomain root, you'll also need to follow some <a class="external text" href="http://www.redmine.org/projects/redmine/wiki/HowTo_Install_Redmine_in_a_sub-URI" rel="nofollow">additional steps</a> or else you will start receiving routing errors as you continue through these setup instructions.)</li>
<li>Do <strong>NOT</strong> enable Passenger. Dreamhost's Passenger version is old and buggy. Use FCGI instead of Passenger - make sure the PHP mode dropdown says <em>PHP x.y.z FastCGI</em>.</li>
<li>Specify your web directory: <em>/home/username/yoursubdomain.yourdomain.com/public</em>. You must add <strong>public</strong>. It is the actual web interface; additional code is contained in parent and sibling folders. <em>Note that if you are planning to use an svn checkout of redmine, you do not need to create the /public directory as it is a part of the repository and has additional files under it.</em></li>
<li>From the Dreamhost control panel create a new MySQL database named <em>yourdatabasename</em>.</li>
</ol>
<h3><span id="Get_the_Redmine_source_code" class="mw-headline">Get the Redmine source code</span></h3>
<p>ssh into your Dreamhost account and run</p>
<pre>cd ~/yoursubdomain.yourdomain.com
hg clone --updaterev 2.0-stable <a class="external free" href="https://bitbucket.org/redmine/redmine-all" rel="nofollow">https://bitbucket.org/redmine/redmine-all</a> redmine-2.0
</pre>
<p>Check <a class="external free" href="http://www.redmine.org/wiki/redmine/Download" rel="nofollow">http://www.redmine.org/wiki/redmine/Download</a> for the latest version. Note, however, that the default Ruby on a DreamHost VPS is 1.8.7, which (according to <a class="external free" href="http://www.redmine.org/projects/redmine/wiki/RedmineInstall" rel="nofollow">http://www.redmine.org/projects/redmine/wiki/RedmineInstall</a>) means you are constrained to version 2.6 at most. (Simply replace both "2.0" entries with "2.6" from the above, or subsequent, commands.) The following command will tell you what Ruby version you are running:</p>
<pre>ruby --version
</pre>
<h4><span id="Alternative_download_methods" class="mw-headline">Alternative download methods</span></h4>
<p>There are a few alternatives to using mercurial to get the source code.</p>
<ul>
<li>Use <strong>svn</strong> to download and update the source code to t</li>
</ul>
<pre>svn checkout <a class="external free" href="http://redmine.rubyforge.org/svn/branches/2.0-stable" rel="nofollow">http://redmine.rubyforge.org/svn/branches/2.0-stable</a> redmine-2.0
</pre>
<ul>
<li>As another alternative, if you don't want to be able to update Redmine, you can do</li>
</ul>
<pre>svn export --force <a class="external free" href="svn://rubyforge.org/var/svn/redmine/branches/2.0-stable" rel="nofollow">svn://rubyforge.org/var/svn/redmine/branches/2.0-stable</a> redmine-2.0
</pre>
<ul>
<li>Or manually unpack a source tarball from <a class="external text" href="http://rubyforge.org/frs/?group_id=1850" rel="nofollow">Rubyforge</a></li>
</ul>
<pre>wget <a class="external free" href="http://rubyforge.org/frs/download.php/76259/redmine-2.0.3.tar.gz" rel="nofollow">http://rubyforge.org/frs/download.php/76259/redmine-2.0.3.tar.gz</a>
tar -zxvf redmine-2.0.3.tar.gz
</pre>
<h3><span id="Configure_the_Redmine_installation" class="mw-headline">Configure the Redmine installation</span></h3>
<ul>
<li>Create the <code>database.yml</code> file</li>
</ul>
<pre>cd ~/<em>yoursubdomain.yourdomain.com</em>/redmine-2.0/config
cp database.yml.example database.yml
</pre>
<ul>
<li>Edit <code>database.yml</code> with a text editor. Change the <code>production</code> stanza to your settings (be careful to preserve the whitespace):</li>
</ul>
<pre>production:
  adapter: mysql
  database: <em>your_redmine_database_name</em>
  host: <em>your_dreamhost_mysql_hostname</em>
  username: <em>your_dreamhost_mysql_username</em>
  password: <em>your_dreamhost_mysql_passsword</em>
  encoding: utf8
</pre>
<ul>
<li>Install gems, run rake, etc. as per the official installation instructions.</li>
</ul>
<h3><span id="Configure_the_FCGI_dispatcher" class="mw-headline">Configure the FCGI dispatcher</span></h3>
<p>Per <a class="external text" href="http://stackoverflow.com/questions/11095412/installing-redmine-version-2-0-2-on-dreamhost-shared-hosting" rel="nofollow">Stack Overflow</a> you may need to add back environment variables in the dispatcher in order to get your Rails app to start loading properly on Dreamhost shared hosting. Add the following lines below the shebang in /public/dispatch.fcgi (copy from the example if there isn't one there yet):</p>
<pre>ENV['RAILS_ENV'] = 'production'
ENV['HOME'] ||= `echo ~`.strip
ENV['GEM_HOME'] = File.expand_path('~/.gems')
ENV['GEM_PATH'] = File.expand_path('~/.gems') + ":" + '/usr/lib/ruby/gems/1.8'
</pre>
<p>You can also copy the .htaccess example in the /public directory if you want to use Redmine's 404.html or 500.html pages. Or start from an example like the one referenced in <a class="external text" href="http://www.redmine.org/boards/2/topics/69" rel="nofollow">this thread</a>.</p>
<h2><span id="Configuring_a_repository" class="mw-headline">Configuring a repository</span></h2>
<p>When a new project is made you will probably link a repository to it. Our Redmine setup is on a Dreamhost PS account. This should work on a shared account but YMMV.</p>
<p>Go to the project. Then settings -&gt; repository -&gt; Create. Choose the repository type and enter its full local path. For example, for git:</p>
<pre> /home/username/repodict/.git
</pre>
<p>It is important to tell Redmine to look for new repositories. Execute this line:</p>
<pre> ruby /home/username/sub.domain.com/script/runner "Repository.fetch_changesets" -e  production
</pre>
<p>Change <em>production</em> for any environment you made.</p>
<h2><span id="Configuring_email" class="mw-headline">Configuring email</span></h2>
<h3><span id="sendmail" class="mw-headline">sendmail</span></h3>
<p>Edited from <a class="external text" href="http://www.mattjones.workhorsy.org/?p=8" rel="nofollow">Matt Jones' Blog</a></p>
<p>The easiest way to send email on a Dreamhost PS account is just to use sendmail. <big><code>cp config/email.yml.example config/email.yml</code></big> Edit email.yml, look for the section marked “=== Sendmail command” and uncomment the following lines so it looks like this:</p>
<pre># === Sendmail command
#
 production:
   delivery_method: :sendmail
#
</pre>
<p>Be sure to comment out any other "production" sections that may appear after this section.</p>
<h3><span id="GMail.2FGoogle_Apps" class="mw-headline">GMail/Google Apps</span></h3>
<p><a class="external text" href="http://redmineblog.com/articles/setup-redmine-to-send-email-using-gmail/" rel="nofollow">Configure Redmine to use GMail/Google Apps </a></p>
<h3><span id="Restart_Passenger" class="mw-headline">Restart Passenger</span></h3>
<p>After changing the e-mail settings don't forget to restart Passenger by adding the file restart.txt to the tmp folder.</p>
<ul>
<li>Change directory (cd) to the root of the redmine install and issue the following command to restart the redmine application.</li>
</ul>
<pre>touch tmp/restart.txt</pre>
<h1><span id="How_to_Fix_Redmine_if_Dreamhost_Upgrades_to_a_Newer_Version_of_Rails" class="mw-headline">How to Fix Redmine if Dreamhost Upgrades to a Newer Version of Rails</span></h1>
<p>Sometimes Dreamhost upgrades Rails (or doesn't upgrade it fast enough to keep up with new versions of Redmine), which can break Redmine since it is fairly particular about rails versions -- the 0.9.x codebase expects rails 2.3.5, for example. Dreamhost upgraded several servers to Rails 2.2.2 on 1/5/09, breaking several Redmine instances. In the user discussion that followed this event, one helpful Dreamhost customer shared the following steps for re-installing Rails 2.0.2 and "freezing" Redmine so that it will continue using the old version, even if Dreamhost upgrades Rails again in the future. The following steps have been updated to show how to install rails 2.3.5. (Note: the original discussion can be viewed at <a class="external free" href="http://www.dreamhoststatus.com/2009/01/05/hooray-another-rails-upgrade/" rel="nofollow">http://www.dreamhoststatus.com/2009/01/05/hooray-another-rails-upgrade/</a>):</p>
<pre>  1. Remove old Rails installations (these overcome the "the rack(0.3.0 not &gt;= 0.9.0)" error.):
     rm -fR /home/YOUR_DOMAIN/.gem
     rm -fR /home/YOUR_DOMAIN/REDMINE_DIR/vendor/rails
  2. Edit REDMINE_DIR/config/environment.rb and ensure it has the following lines:
     RAILS_GEM_VERSION = '2.3.5' unless defined? RAILS_GEM_VERSION
     ENV['GEM_PATH'] = '/home/YOUR_DOMAIN/.gem:/usr/lib/ruby/gems/1.8'
  3. Navigate to your Redmine directory and install ROR v2.3.5 (highest version of Rails supported by Redmine):
     gem install -v=2.3.5 rails
     Note: You will probably get 2 WARNINGs - we have taken these into account in step 2.
  4. Freeze your Redmine to use 2.3.5 and nothing else:
     rake rails:freeze:edge TAG=rel_2-3-5
     IMPORTANT: Do NOT type “rake rails:freeze:gems” - this breaks it again. Also, I did not need to run “rake rails:update”.
  5. Replace REDMINE_DIR/config/boot.rb with REDMINE_DIR/vendor/rails/railties/environments/boot.rb. This overcomes the “undefined method 'install_gem_spec_stubs' for #)” error.
</pre>
<p>Note: You may experience a small delay (up to an hour?) before Redmine starts working again.</p>
<p><strong>WARNING: rake rails:freeze:edge TAG=rel_2-3-5 no long works!</strong> --<a class="new" title="User:Ericvh (page does not exist)" href="http://wiki.dreamhost.com/index.php?title=User:Ericvh&amp;action=edit&amp;redlink=1">Ericvh</a> 10:22, 20 December 2010 (PST)</p>
<p>To get by the problem with "rake rails:freeze..." timing out use the following from the REDMINE_DIR:</p>
<pre>git clone --branch=2-3-stable git://github.com/rails/rails.git rails
cd rails
git checkout v2.3.5
</pre>
<p><strong>Update:</strong> In December 2010, Dreamhost upgraded Rails to version 3.0.3, which broke many installations of Redmine.</p>
<p>Instructions for fixing have been provided by paulorcf on the <a class="external text" href="http://www.vpidata.com/blog/2010/12/20/redmine-bug-dreamhost/" rel="nofollow">VPIData blog</a>:</p>
<pre>1. $ rake VERSION=2.3.5 rails:freeze:gems
2. $ cd vendor/rails/activesupport/lib/active_support/
3. $ vim vendor.rb
4. Edit line 24 ( <a class="external free" href="http://stackoverflow.com/questions/2975532/have-rails-2-3-x-ignore-the-i18n-gem" rel="nofollow">http://stackoverflow.com/questions/2975532/have-rails-2-3-x-ignore-the-i18n-gem</a> )
  gem 'i18n', '&gt;= 0.1.3', '&lt; 0.4.0'
5. $ cd -
6. $ rm -rf tmp/restart.txt
7. $ touch tmp/restart.txt
</pre>
<h1><span id="Fixing_the_problems_in_browsing_a_Mercurial_repository" class="mw-headline">Fixing the problems in browsing a Mercurial repository</span></h1>
<p>If you use Mercurial as your repository in Redmine and self compiled your own Mercurial in your home directory, you might be getting a 500 error whenever trying to browse the repository. The problem is merely that Redmine does not find your Mercurial Binary and your Python library. To solve the issue, please do the following modifications:</p>
<p>In newer versions of Redmine simply:</p>
<ol>
<li>cp config/configuration.yml.example config/configuration.yml</li>
<li>nano config/configuration.yml</li>
<li>Look for the line containing "scm_mercurial_command", and add the path to your Mercurial binary.</li>
</ol>
<p>Or for older versions:</p>
<ol>
<li>Open <strong>~/&lt;your-redmine-domain&gt;/config/environment.rb</strong></li>
<li>Add <strong>ENV["PYTHONPATH"] = '/&lt;your-home-directory&gt;/lib/python'</strong></li>
<li>Save the file and close</li>
<li>Open <strong>~/&lt;your-redmine-domain/lib/redmine/scm/adapters/mercurial_adapter.rb</strong></li>
<li>Modify the line that says HGBIN to the following: <strong>HGBIN = '/&lt;your-home-directory&gt;/bin/hg'</strong></li>
<li>Save the file and close</li>
<li>Restart the Application
<ol>
<li>Create a file at: <strong>~/&lt;your-redmine-domain&gt;/tmp/restart.txt</strong> with empty contents</li>
<li>If such a file already exits, just update it using: <strong>touch ~/&lt;your-redmine-domain&gt;/tmp/restart.txt</strong></li>
</ol>
</li>
<li>Now Browse your site and you'll see everything working fine.</li>
</ol>
<h1><span id="Alternative_Packages" class="mw-headline">Alternative Packages</span></h1>
<div id="mw-content-text" class="mw-content-ltr" dir="ltr" lang="en">
<p><a title="Bugzilla" href="http://wiki.dreamhost.com/Bugzilla">Bugzilla</a></p>
<p><a class="mw-redirect" title="Mantis" href="http://wiki.dreamhost.com/Mantis">Mantis</a> is a PHP bug tracker</p>
<p><a title="Trac" href="http://wiki.dreamhost.com/Trac">Trac</a></p>
</div>
