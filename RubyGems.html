<div style="background-color: #fee; margin: 1em; padding: 10px; border: 1px solid #aaa; text-align: center;"><strong>WARNING: POSSIBLE OUTDATED INFORMATION!</strong><br /><span style="font-size: 90%;">DreamHost does not directly support any of the features described on this page and is not responsible for keeping this content updated or accurate. Use at your own risk! <br />There may be additional information on the <a title="Talk:RubyGems" href="http://wiki.dreamhost.com/Talk:RubyGems"> talk page</a>.</span></div>
<div>
<table style="text-align: center; background-color: #ffefef; border: 1px solid #FF9F9F; padding: 0px; margin: 0 auto 2em auto; width: 80%;">
<tbody>
<tr>
<td><strong>The instructions provided in this article or section are considered advanced.</strong><br />
<p>You are expected to be knowledgeable in the UNIX shell.<br /> <span style="font-size: 1.1em; text-decoration: blink;"><em>Support for these instructions is <strong>not available</strong> from DreamHost tech support.</em></span><br /> <span style="font-size: 1.1em;"><strong><em>Server changes performed by DreamHost may break your modifications. You, as the user, are responsible for troubleshooting and resolving issues with your customizations.</em></strong> </span><strong><em><br /></em></strong></p>
</td>
</tr>
</tbody>
</table>
</div>
<div id="toc" class="toc">
<div id="toctitle">
<h2>Contents</h2>
</div>
</div>
<div id="toc" class="toc">
<ul>
<li class="toclevel-1 tocsection-1"><a href="http://wiki.dreamhost.com/RubyGems#Before_You_Make_a_Big_Fish_of_a_Small_Fry"><span class="tocnumber">1</span> <span class="toctext">Before You Make a Big Fish of a Small Fry</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="http://wiki.dreamhost.com/RubyGems#Installing_a_Local_Copy_of_RubyGems"><span class="tocnumber">2</span> <span class="toctext">Installing a Local Copy of RubyGems</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="http://wiki.dreamhost.com/RubyGems#The_non-Unix_account_setup_way_.28install_to_.7E.29"><span class="tocnumber">2.1</span> <span class="toctext">The non-Unix account setup way (install to ~)</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="http://wiki.dreamhost.com/RubyGems#Install_gem"><span class="tocnumber">2.1.1</span> <span class="toctext">Install gem</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="http://wiki.dreamhost.com/RubyGems#Installing.2Fupdating_gems_without_installing_gem"><span class="tocnumber">2.1.2</span> <span class="toctext">Installing/updating gems without installing gem</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-6"><a href="http://wiki.dreamhost.com/RubyGems#The_Unix_Account_Setup_way"><span class="tocnumber">2.2</span> <span class="toctext">The Unix Account Setup way</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="http://wiki.dreamhost.com/RubyGems#Install_gem_2"><span class="tocnumber">2.2.1</span> <span class="toctext">Install gem</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="http://wiki.dreamhost.com/RubyGems#Installing.2Fupdating_gems_without_installing_gem_2"><span class="tocnumber">2.2.2</span> <span class="toctext">Installing/updating gems without installing gem</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="http://wiki.dreamhost.com/RubyGems#Adding_the_.gemrc_File"><span class="tocnumber">3</span> <span class="toctext">Adding the .gemrc File</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="http://wiki.dreamhost.com/RubyGems#Application_Specific_Gems"><span class="tocnumber">4</span> <span class="toctext">Application Specific Gems</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="http://wiki.dreamhost.com/RubyGems#Forcing_your_Application_Search_Path"><span class="tocnumber">5</span> <span class="toctext">Forcing your Application Search Path</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="http://wiki.dreamhost.com/RubyGems#Other_helpful_stuff"><span class="tocnumber">6</span> <span class="toctext">Other helpful stuff</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="http://wiki.dreamhost.com/RubyGems#See_Also"><span class="tocnumber">7</span> <span class="toctext">See Also</span></a></li>
</ul>
</div>
<h2><span id="Before_You_Make_a_Big_Fish_of_a_Small_Fry" class="mw-headline">Before You Make a Big Fish of a Small Fry</span></h2>
<p>Just trying to install your own gems? You probably don't need to install RubyGems! Without any other messing around, try just installing whatever gems you need.</p>
<pre>$ gem install mysql2 -v 0.3.7
</pre>
<p>If you're having trouble getting a Rails 3 application up and running, dive over to the <a title="Rails 3" href="http://wiki.dreamhost.com/Rails_3">Rails 3</a> article.</p>
<p>And hey, if your application isn't Rails, but it happens to have a Gemfile, you might want to give the following a try:</p>
<pre>$ export PATH=~/.gems/bin:/usr/lib/ruby/gems/1.8/bin:$PATH
$ bundle install
$ bundle install --deployment
</pre>
<p>You can read more about Bundler and how it makes life a little easier over at the Bundler website.</p>
<p><a class="external free" href="http://gembundler.com/" rel="nofollow">http://gembundler.com/</a></p>
<p>If your application isn't currently using Bundler, you may want to consider adding Bundler to it!</p>
<h2><span id="Installing_a_Local_Copy_of_RubyGems" class="mw-headline">Installing a Local Copy of RubyGems</span></h2>
<pre> WARNING - Using your own version of RubyGems is not supported by DreamHost.  
 You should not carry out these instructions unless you are prepared to fix any problems on your own.  
 If you cannot do this and you need a newer version, please contact support to ask for an upgrade.
</pre>
<p>Installing your own copy of RubyGems is useful if you're using or writing software that depends on a higher version of RubyGems than is currently installed on DreamHost (1.3.6 as of 9 October 2010). See <a class="external free" href="http://rails.dreamhosters.com" rel="nofollow">http://rails.dreamhosters.com</a> for a list of installed gems.</p>
<p>Note: The Dreamhosters list of RubyGems versions is out of date. To get the up-to-date list, ssh into your account and run:</p>
<pre>gem list
</pre>
<p>So let's get started!</p>
<h3><span id="The_non-Unix_account_setup_way_.28install_to_.7E.29" class="mw-headline">The non-Unix account setup way (install to ~)</span></h3>
<p>So let's get started. First we need to create the directories to store the gems:</p>
<pre>cd ~
mkdir .gems
</pre>
<p>Now, let's make sure our paths are updated so that the new gems folder will take precedence over the global installation. Open up <code>~/.bash_profile</code> in your favorite text editor and edit these lines:</p>
<pre>export GEM_HOME="$HOME/.gems"
export GEM_PATH="$GEM_HOME:/usr/lib/ruby/gems/1.8"
</pre>
<p>If you are installing your own custom gem, you will need to read the following section as well.</p>
<h4><span id="Install_gem" class="mw-headline">Install gem</span></h4>
<p>We need to create some more directories:</p>
<pre>cd ~/.gem
mkdir bin lib src
</pre>
<p>Next, we need to set up paths so that the RubyGems libraries and executables you install will take precedence over the global installation. Open up <code>~/.bash_profile</code> in your favorite text editor and insert these lines:</p>
<pre>export PATH="$HOME/bin:$HOME/.gems/bin:$PATH"
export RUBYLIB="$HOME/lib:$RUBYLIB"
</pre>
<p>(See <a title="Killed" href="http://wiki.dreamhost.com/Killed">Killed</a> if having problems)</p>
<p>To ensure that these changes get put into effect, use the source command.</p>
<pre>source ~/.bash_profile
</pre>
<p>Now let's install RubyGems (latest version 1.7.2 as of May 2011).</p>
<pre>cd ~/src
wget <a class="external free" href="http://production.cf.rubygems.org/rubygems/rubygems-1.7.2.tgz" rel="nofollow">http://production.cf.rubygems.org/rubygems/rubygems-1.7.2.tgz</a>
tar xzvf rubygems-1.7.2.tgz
cd rubygems-1.7.2
ruby setup.rb --prefix=$HOME
</pre>
<p>This will put the RubyGems libraries into <tt>~/lib</tt>, and the <tt>gem</tt> executable in <tt>~/bin</tt>. By default this executable is named "gem1.8" instead of "gem" as you might expect. So we need to make a symlink called "gem" that points to <tt>gem1.8</tt>:</p>
<pre>cd ~/bin
ln -s gem1.8 gem
</pre>
<p>Okay, now let's make sure the <tt>gem</tt> commands points to the one you just installed and has the right version:</p>
<pre>which gem   # should return /home/USERNAME/bin/gem
gem -v      # should return 1.3.0
</pre>
<p>If everything looks okay, you should be able to install your own gems and update gems that are already there. For example, you could update Rails with:</p>
<pre>gem install rails
</pre>
<h4><span id="Installing.2Fupdating_gems_without_installing_gem" class="mw-headline">Installing/updating gems without installing <code>gem</code></span></h4>
<p>For those of you who don't need (or want) to install RubyGems, there is another way you can use your own gems without the naughty-ness of installing RubyGems (bloating your massive quota or just getting in your way or just no use for it). These are the steps to aid in the use of your own gems -- forwarning, using your own directory of gems (as with the above system) could break how ruby and ruby on rails runs. If a gem messes your site up, uninstall it.</p>
<p>Now, let's make sure our paths are updated so that the new gems folder will take precedence over the global installation. Open up <code>~/.bash_profile</code> in your favorite text editor and insert this line:</p>
<pre>export GEM_HOME="$HOME/.gems"
export GEM_PATH="$GEM_HOME:/usr/lib/ruby/gems/1.8"
export PATH="$HOME/.gems/bin:$PATH"
</pre>
<p>Also be sure the ".gems" directory exists.</p>
<p>For example, you can now update your rails gem with:</p>
<pre>gem install rails
</pre>
<p>All of your personally-installed gems will end up in ~/.gems for you to use.</p>
<p>A few notes: Remember that with either a full <code>gem</code> install or using this technique, you need to use <code>--include-dependencies</code> to make sure all the dependencies are current. Be prepared, you can kill your ruby; if you do, you have <code>gem uninstall</code>, manually going into the .gems folder and deleting, or worst-case, deleting the whole .gems folder and starting again. Also, if you are using the Ruby on Rails platform, your "require" statements should list the full path of your personally installed rubygem. IE: require '/home/your_account/.gems/gems/activemerchant-0.6.0/lib/active_merchant'. Or add a line to the beginning of your environment.rb file that looks like:</p>
<pre>ENV['GEM_PATH'] = '/home/your_account/.gems:/usr/lib/ruby/gems/1.8'
</pre>
<p>Dabbling in this art can bring your rails app to its knees quickly. So take care, and remember you can always remove these changes in case something goes wrong.</p>
<p>Running gem install may get killed by the "tyrannical, but good-natured, procwatch daemon" while trying to resolve gem dependencies. A work-around is to install the gem manually and resolve the dependencies yourself. Download the gem file, then from the directory containing the gem run:</p>
<pre>gem install --local gem_name
</pre>
<h3><span id="The_Unix_Account_Setup_way" class="mw-headline">The Unix Account Setup way</span></h3>
<p>Since we are using the <a title="Unix account setup" href="http://wiki.dreamhost.com/Unix_account_setup">Unix account setup</a> instructions, we will only need to create the .gems directory (since <code>lib</code> and <code>bin</code> are already created, and we are using <code>soft</code> to download and compile your sources):</p>
<pre>cd $RUN
mkdir .gems
</pre>
<p>Now, let's make sure our paths are updated so that the new gems folder will take precedence over the global installation. Open up <code>~/.bash_profile</code> in your favorite text editor and edit these lines:</p>
<pre>export GEM_HOME="$RUN/.gems"
export GEM_PATH="$GEM_HOME:/usr/lib/ruby/gems/1.8"
</pre>
<p>If you are installing your own custom gem, you will need to read the following section as well.</p>
<h4><span id="Install_gem_2" class="mw-headline">Install gem</span></h4>
<p>We need to set up paths so that the RubyGems libraries and executables you install will take precedence over the global installation. Open up <code>~/.bash_profile</code> in your favorite text editor and insert these lines:</p>
<pre>export PATH="$RUN/.gems/bin:$PATH"
export RUBYLIB="$RUN/lib:$RUBYLIB"
</pre>
<p>To ensure that these changes get put into effect, use the source command.</p>
<pre>source ~/.bash_profile
</pre>
<p>Now let's install RubyGems (latest version 1.3.0 as of Oct 2008). We include alias to ensure our gem install processes don't get killed by the DreamHost police. Since this gem alias will break future usage of the gem command, we unalias it after our initial setup.</p>
<pre>cd ~/soft
wget <a class="external free" href="http://rubyforge.org/frs/download.php/43985/rubygems-1.3.0.tgz" rel="nofollow">http://rubyforge.org/frs/download.php/43985/rubygems-1.3.0.tgz</a>
tar xzvf rubygems-1.3.0.tgz
cd rubygems-1.3.0
ruby setup.rb --prefix=$RUN
unalias gem
</pre>
<p>This will put the RubyGems libraries into <tt>$RUN/lib</tt>, and the <tt>gem</tt> executable in <tt>$RUN/bin</tt>. By default this executable is named "gem1.8" instead of "gem" as you might expect. So we need to make a symlink called "gem" that points to <tt>gem1.8</tt>:</p>
<pre>cd $RUN/bin
ln -s gem1.8 gem
</pre>
<p>Okay, now let's make sure the <tt>gem</tt> commands points to the one you just installed and has the right version:</p>
<pre>which gem   # should return /home/run/USERNAME/bin/gem
gem -v      # should return 1.3.0
</pre>
<p>If everything looks okay, you should be able to install your own gems and update gems that are already there. For example, you could update Rails with:</p>
<pre>gem install rails
</pre>
<h4><span id="Installing.2Fupdating_gems_without_installing_gem_2" class="mw-headline">Installing/updating gems without installing <code>gem</code></span></h4>
<p>This section needs updating. There is another section on "Installing/updating gems without installing <code>gem</code>" above. It has information that may be useful.</p>
<p>For those of you who don't need (or want) to install gems, there is another way you can use your own gems without the naughty-ness of installing gems (bloating your massive quota or just getting in your way or just no use for it) these are the steps to aid in the use of your own gems -- forwarning, using your own directory of gems (as with the above system) could break how ruby and ruby on rails runs. If a gem messes your site up, uninstall it.</p>
<p>Now, let's make sure our paths are updated so that the new gems folder will take precedence over the global installation. Open up <code>~/.bash_profile</code> in your favorite text editor and insert this line:</p>
<pre>export PATH="$RUN/.gems/bin:$PATH"
</pre>
<p>To ensure that these changes get put into effect, use the source command.</p>
<pre>source ~/.bash_profile
</pre>
<p>For example, you can now update your rails gem with:</p>
<pre>gem install rails
</pre>
<p>All of your personally-installed gems will end up in $RUN/.gems for you to use.</p>
<p>A few notes: Remember that with either a full <code>gem</code> install or using this technique, you need to use <code>--include-dependencies</code> to make sure all the dependencies are current. Be prepared, you can kill your ruby; if you do, you have <code>gem uninstall</code>, manually going into the .gems folder and deleting, or worst-case, deleting the whole .gems folder and starting again. Also, if you are using the Ruby on Rails platform, your "require" statements should list the full path of your personally installed rubygem. IE: require '/home/your_account/run/.gems/gems/activemerchant-0.6.0/lib/active_merchant'</p>
<p>Running gem install may get killed by the "tyrannical, but good-natured, procwatch daemon" while trying to resolve gem dependencies. A work-around is to install the gem manually and resolve the dependencies yourself. Download the gem file, then from the directory containing the gem run:</p>
<pre>gem install --local gem_name
</pre>
<h2><span id="Adding_the_.gemrc_File" class="mw-headline">Adding the <code>.gemrc</code> File</span></h2>
<p>If you get the error "Could not find RubyGem sources" when you attempt "gem install whatever", you'll need to add a <code>.gemrc</code> file.</p>
<pre>touch ~/.gemrc
</pre>
<p>Add the following lines to the <code>.gemrc</code> file using your favorite editor. Be sure to add a newline at the end of the file.</p>
<pre>gemhome: /home/USERNAME/.gems
gempath:
- /home/USERNAME/.gems
- /usr/lib/ruby/gems/1.8
</pre>
<h2><span id="Application_Specific_Gems" class="mw-headline">Application Specific Gems</span></h2>
<p>Alternatively you can include gems in the vendor/plugins directory of your application. You can use the rake freeze task to move them there in your development environment and then just copy them over to Dreamhost.</p>
<p>Some plugins, such as <a class="external text" href="http://haml.hamptoncatlin.com/" rel="nofollow">haml</a>, don't <code>rake rails:freeze:gems</code> or <code>gem unpack</code> properly. I found I could still use them in vendor/plugins by copying the files from <code>/var/lib/gems/1.8/gems/gemname</code> (or wherever your gems are located) to vendor/plugins.</p>
<h2><span id="Forcing_your_Application_Search_Path" class="mw-headline">Forcing your Application Search Path</span></h2>
<p>You may find that your application will not pick up your personal gems from the bash environment. If you are still running into problems using custom gems, I recommend that you add something like the following to the top of your <code>config/environment.rb</code> file:</p>
<pre>ENV['GEM_PATH'] = '/home/yourusername/.gems:/usr/lib/ruby/gems/1.8'
</pre>
<p>This should force your application to check your <code>.gems</code> directory before any of the public gems. I found this was necessary to use the Haml preprocessor plugin.</p>
<h2><span id="Other_helpful_stuff" class="mw-headline">Other helpful stuff</span></h2>
<p>To get around Permission Denied errors, check out - <a class="external free" href="http://whynotwiki.com/Gems_/_How_to_install_to_your_home_directory" rel="nofollow">http://whynotwiki.com/Gems_/_How_to_install_to_your_home_directory</a></p>
<h2><span id="See_Also" class="mw-headline">See Also</span></h2>
<ul>
<li><a class="external text" href="http://nateclark.com/articles/2006/10/20/dreamhost-your-own-packages-and-gems" rel="nofollow">Dreamhost - Your Own Packages and Gems</a></li>
<li><a class="external text" href="http://forums.site5.com/showthread.php?p=87539" rel="nofollow">How To Install Your Own Gems for Rails</a></li>
<li><a class="external text" href="http://docs.rubygems.org/" rel="nofollow">RubyGems Manuals</a></li>
</ul>
