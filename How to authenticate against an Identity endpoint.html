<body role="document">
<div class="document">
<div class="documentwrapper">
<div class="body" role="main">
<div id="how-to-authenticate-against-an-identity-endpoint">
<p>To authenticate against the Identity v2.0 endpoint, instantiate a
<a class="reference external" href="http://docs.openstack.org/developer/python-keystoneclient/api/keystoneclient.v2_0.client.html#keystoneclient.v2_0.client.Client">keystoneclient.v_20.client.Client</a> object:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">environ</span> <span class="k">as</span> <span class="n">env</span>
<span class="kn">import</span> <span class="nn">keystoneclient.v2_0.client</span> <span class="kn">as</span> <span class="nn">ksclient</span>
<span class="n">keystone</span> <span class="o">=</span> <span class="n">ksclient</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span><span class="n">auth_url</span><span class="o">=</span><span class="n">env</span><span class="p">[</span><span class="s1">'OS_AUTH_URL'</span><span class="p">],</span>
                           <span class="n">username</span><span class="o">=</span><span class="n">env</span><span class="p">[</span><span class="s1">'OS_USERNAME'</span><span class="p">],</span>
                           <span class="n">password</span><span class="o">=</span><span class="n">env</span><span class="p">[</span><span class="s1">'OS_PASSWORD'</span><span class="p">],</span>
                           <span class="n">tenant_name</span><span class="o">=</span><span class="n">env</span><span class="p">[</span><span class="s1">'OS_TENANT_NAME'</span><span class="p">],</span>
                           <span class="n">region_name</span><span class="o">=</span><span class="n">env</span><span class="p">[</span><span class="s1">'OS_REGION_NAME'</span><span class="p">])</span>
</pre></div>
</div>
<p>After you instantiate a <code class="docutils literal"><span class="pre">Client</span></code> object, you can retrieve the token by
accessing its <code class="docutils literal"><span class="pre">auth_token</span></code> attribute object:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">keystoneclient.v2_0.client</span> <span class="kn">as</span> <span class="nn">ksclient</span>
<span class="n">keystone</span> <span class="o">=</span> <span class="n">ksclient</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="k">print</span> <span class="n">keystone</span><span class="o">.</span><span class="n">auth_token</span>
</pre></div>
</div>
<p>If the OpenStack cloud is configured to use public-key infrastructure
(PKI) tokens, the Python script output looks something like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>MIIQUQYJKoZIhvcNAQcCoIIQQjCCED4CAQExCTAHBgUrDgMCGjCCDqcGCSqGSIb3DQEHAaCCDpgE
gg6UeyJhY2Nlc3MiOiB7InRva2VuIjogeyJpc3N1ZWRfYXQiOiAiMjAxMy0xMC0yMFQxNjo1NjoyNi
4zNTg2MjUiLCAiZXhwaXJlcyI6ICIyMDEzLTEwLTIxVDE2OjU2OjI2WiIsICJpZCI6ICJwbGFjZWhv
...
R3g14FJ0BxtTPbo6WarZ+sA3PZwdgIDyGNI-0Oqv-8ih4gJC9C6wBCel1dUXJ0Mn7BN-SfuxkooVk6
e090bcKjTWet3CC8IEj7a6LyLRVTdvmKGA5-pgp2mS5fb3G2mIad4Zeeb-zQn9V3Xf9WUGxuiVu1Hn
fhuUpJT-s9mU7+WEC3-8qkcBjEpqVCvMpmM4INI=
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This example shows a subset of a PKI token. A complete token is over
5000 characters long.</p>
</div>
</div>
</div>
</div>
<div class="clearer"></div>
</div>
<div class="footer">
      Â©2015-2016, OpenStack contributors.
      
    </div>
<!--DreamCompute Button-->
<div class="dream-sign-up">
<h2>Deploy Your Apps On Cloud Servers Today</h2>
<a href="http://www.dreamhost.com/cloud/computing">Sign Up for DreamCompute</a>
</div>
</body>
