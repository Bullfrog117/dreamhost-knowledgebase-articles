<p>This article describes how to migrate a WordPress installation between two domains hosted at DreamHost. The example domains used in these instructions are:</p>
<ul>
<li>oldsite.example.com</li>
</ul>
<dl>
<dd><em><strong>and</strong></em></dd>
</dl>
<ul>
<li>newsite.example.com</li>
</ul>
<h2>Step one – Back up your data</h2>
<p>You should always backup your data before making any change to your site. View the following article for instructions on how to backup your web site files, database, and any email you wish to keep:</p>
<ul>
<li><a href="/hc/en-us/articles/215768237-How-can-I-manually-backup-my-data-">Manual backup techniques</a></li>
</ul>
<h2>Step two – Add hosting for the new site</h2>
<p>Add the new domain (newsite.example.com) to your panel. Make sure to set it as Fully Hosted:</p>
<ul>
<li><a href="/hc/en-us/articles/215416227-How-do-I-add-a-domain-">Adding a Domain</a></li>
</ul>
<h2>Step three – Create a new database</h2>
<p>Navigate to the (<a href="https://panel.dreamhost.com/index.cgi?tree=goodies.mysql&amp;">Panel &gt; ‘Goodies’ &gt; ‘MySQL Databases’</a>) page and create a new MySQL hostname and empty database.</p>
<ul>
<li><a href="/hc/en-us/articles/221691727-Creating-a-MySQL-database">Create a new database</a></li>
</ul>
<h2>Step four – Transfer your WordPress installation</h2>
<p>Transfer your WordPress files you’ve backed up in step one to your new domain. If you had email addresses on the old site (oldsite.example.com), make sure to create the same addresses on your new domain. You can then transfer those emails.</p>
<ol>
<li>Import your web files using the following article:
<ul>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/115000675027-FTP-overview-and-credentials">FTP</a></li>
</ul>
</li>
<li>Import your database using the Migrate MySQL article:
<ul>
<li><a href="/hc/en-us/articles/215039938-How-do-I-migrate-my-database-to-DreamHost-">Migrate MySQL</a></li>
</ul>
</li>
<li>Transfer email from your old domain:
<ul>
<li><a href="/hc/en-us/articles/215029918-How-do-I-add-an-email-address-">Email Setup</a>: Use this article to set up your email addresses on the new domain.</li>
<li><a href="/hc/en-us/articles/215730827-How-do-I-import-my-old-host-s-email-to-my-DreamHost-mail-server-">How to import email</a>: This article explains how to import your email to the new domain.</li>
<li><a href="/hc/en-us/articles/214918038-Email-client-configuration-overview">Email Client Configuration</a>: This article is a guide to different email configurations you can use.</li>
</ul>
</li>
</ol>
<h2>Step five – Edit the new wp-config.php file</h2>
<p>Log into your new site (newsite.example.com) via <a href="https://help.dreamhost.com/hc/en-us/articles/115000675027-FTP-overview-and-credentials">FTP</a> or <a href="/hc/en-us/articles/216041267-SSH-overview">SSH</a> and open the wp-config.php file (this is in your site's directory). You’ll see the following contents:</p>
<div class="preboxcontainer">
<pre class="prebox">define('DB_NAME', ‘exampledatabase’);
define('DB_USER', 'exampledbuser');
define('DB_PASSWORD', ‘database password here’);
define('DB_HOST', 'mysql.example.com');
define('DB_CHARSET', 'utf8');
define('DB_COLLATE', '');

$table_prefix = 'wp_2hdy121d_';
</pre>
</div>
<p>Update the following:</p>
<ul>
<li>Database name</li>
<li>Database user</li>
<li>Database user password</li>
<li>Hostname</li>
<li>Replace the existing WordPress $table_prefix value <a href="https://help.dreamhost.com/hc/en-us/articles/214693178#Step_five_.E2.80.93_Editing_wp-config.php">with the imported <span class="code">$table_prefix</span> value</a>.</li>
</ul>
<h2>Step six – Update the Home and Site url</h2>
<p>View the following article for instructions on how to update the Home and Site URL within WordPress:</p>
<ul>
<li><a href="/hc/en-us/articles/214580498-How-do-I-change-the-WordPress-Site-URL-">Changing the Home and Site url</a></li>
</ul>
<h2>Step seven – Update all other urls in the database</h2>
<p>WordPress hardcodes the site's domain name into the database in such things as image and link urls. This is a problem because when you click on a link on your new site, it redirects back to the old site. To change these, you can use a search and replace the plugin. Below are a couple of plugins that work:</p>
<ul>
<li><a href="https://wordpress.org/plugins/velvet-blues-update-urls/">Velvet Blues Update URLs</a></li>
<li><a href="https://wordpress.org/plugins/search-and-replace/">Search and Replace</a></li>
<li><a href="https://wordpress.org/plugins/better-search-replace/">Better Search Replace</a></li>
</ul>
<p>If you are familiar with the command line, run the following command for the same effect (assuming you saved the old WordPress address):</p>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">wp search-replace http://example.com http://new.example.com --dry-run</span></pre>
</div>
<p>The --dry-run call at the end tests the address</p>
<p>If the changes make sense to you, then run the above command again without the 'dry-run' call.</p>
<p>At this point, your website should load normally on the new domain name.</p>
<h2>Summary</h2>
<p>Once the above steps are complete, the new site looks exactly the same as as it once appeared on your old domain name.</p>
<h2><span id="See_also">See also</span></h2>
<ul>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/215525287-WordPress-overview">WordPress overview</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/214693178-How-to-manually-migrate-WordPress-to-DreamHost">How to manually migrate WordPress to DreamHost</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/215412347-How-do-I-test-my-WordPress-migration-to-DreamHost-before-changing-DNS-">How do I test my WordPress migration to DreamHost before changing DNS?</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/214828548-How-do-I-install-WordPress-before-my-DNS-is-pointed-to-DreamHost-">How do I install WordPress before my DNS is pointed to DreamHost?</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/215525277-How-to-install-WordPress-using-the-One-Click-Installer">How to install WordPress using the One-Click Installer</a></li>
</ul>
