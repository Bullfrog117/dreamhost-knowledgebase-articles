<div><strong>WARNING: POSSIBLE OUTDATED INFORMATION!</strong><br />DreamHost does not directly support any of the features described on this page and is not responsible for keeping this content updated or accurate. Use at your own risk! <br />There may be additional information on the <a title="Talk:Capistrano" href="http://wiki.dreamhost.com/Talk:Capistrano">talk page</a>.</div>
<p><a class="external text" href="http://manuals.rubyonrails.com/read/book/17" rel="nofollow">Capistrano</a> automates the deployment, migration, upgrades and rollbacks of your <a title="Ruby on Rails" href="http://wiki.dreamhost.com/Ruby_on_Rails">Rails</a> applications.</p>
<div id="toc" class="toc">
<div id="toctitle">
<h2>Contents</h2>
<span class="toctoggle"> [<a id="togglelink" href="http://wiki.dreamhost.com/Capistrano">hide</a>] </span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="http://wiki.dreamhost.com/Capistrano#Getting_Started"><span class="tocnumber">1</span> <span class="toctext">Getting Started</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="http://wiki.dreamhost.com/Capistrano#Set_up_sub-domain"><span class="tocnumber">1.1</span> <span class="toctext">Set up sub-domain</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="http://wiki.dreamhost.com/Capistrano#Set_up_new_database"><span class="tocnumber">1.2</span> <span class="toctext">Set up new database</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="http://wiki.dreamhost.com/Capistrano#Git"><span class="tocnumber">1.3</span> <span class="toctext">Git</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="http://wiki.dreamhost.com/Capistrano#Subversion"><span class="tocnumber">1.4</span> <span class="toctext">Subversion</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="http://wiki.dreamhost.com/Capistrano#Environment_Configuration"><span class="tocnumber">1.5</span> <span class="toctext">Environment Configuration</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="http://wiki.dreamhost.com/Capistrano#Force_Production_RAILS_ENV"><span class="tocnumber">1.5.1</span> <span class="toctext">Force Production RAILS_ENV</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="http://wiki.dreamhost.com/Capistrano#Fix_Dispatcher_Shebang.21"><span class="tocnumber">1.5.2</span> <span class="toctext">Fix Dispatcher Shebang!</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="http://wiki.dreamhost.com/Capistrano#Fix_.htaccess_to_use_Dispatcher"><span class="tocnumber">1.5.3</span> <span class="toctext">Fix .htaccess to use Dispatcher</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-10"><a href="http://wiki.dreamhost.com/Capistrano#Automate_Deployment_with_Capistrano_.28.22capify.22.29"><span class="tocnumber">1.6</span> <span class="toctext">Automate Deployment with Capistrano ("capify")</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="http://wiki.dreamhost.com/Capistrano#Deployment_with_Capistrano"><span class="tocnumber">1.7</span> <span class="toctext">Deployment with Capistrano</span></a>
<ul>
<li class="toclevel-3 tocsection-12"><a href="http://wiki.dreamhost.com/Capistrano#Prepare_deploy_environment"><span class="tocnumber">1.7.1</span> <span class="toctext">Prepare deploy environment</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="http://wiki.dreamhost.com/Capistrano#Deploy"><span class="tocnumber">1.7.2</span> <span class="toctext">Deploy</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="http://wiki.dreamhost.com/Capistrano#Maintenance_via_Capistrano"><span class="tocnumber">1.7.3</span> <span class="toctext">Maintenance via Capistrano</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="http://wiki.dreamhost.com/Capistrano#Miscellaneous_Tasks"><span class="tocnumber">1.7.4</span> <span class="toctext">Miscellaneous Tasks</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-16"><a href="http://wiki.dreamhost.com/Capistrano#Keep_Generated_Files_Between_Deployments"><span class="tocnumber">1.8</span> <span class="toctext">Keep Generated Files Between Deployments</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17"><a href="http://wiki.dreamhost.com/Capistrano#Gotchas"><span class="tocnumber">2</span> <span class="toctext">Gotchas</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="http://wiki.dreamhost.com/Capistrano#Setting_up_the_Migrations"><span class="tocnumber">2.1</span> <span class="toctext">Setting up the Migrations</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="http://wiki.dreamhost.com/Capistrano#Default_shell"><span class="tocnumber">2.2</span> <span class="toctext">Default shell</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="http://wiki.dreamhost.com/Capistrano#Freezing_Rails_vs._Third_party_code"><span class="tocnumber">2.3</span> <span class="toctext">Freezing Rails vs. Third party code</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="http://wiki.dreamhost.com/Capistrano#cap_deploy_gets_stuck_.27subversion_is_asking_for_a_password.27"><span class="tocnumber">2.4</span> <span class="toctext">cap deploy gets stuck 'subversion is asking for a password'</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="http://wiki.dreamhost.com/Capistrano#.22svn_export.22_results_in_.27Killed_by_signal_15.27"><span class="tocnumber">2.5</span> <span class="toctext">"svn export" results in 'Killed by signal 15'</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-23"><a href="http://wiki.dreamhost.com/Capistrano#Resources"><span class="tocnumber">3</span> <span class="toctext">Resources</span></a></li>
<li class="toclevel-1 tocsection-24"><a href="http://wiki.dreamhost.com/Capistrano#SwitchTower"><span class="tocnumber">4</span> <span class="toctext">SwitchTower</span></a></li>
</ul>
</div>
<h1><span id="Getting_Started" class="mw-headline">Getting Started</span></h1>
<div>
<table>
<tbody>
<tr>
<td><strong>The instructions provided in this article or section are considered advanced.</strong><br />
<p>You are expected to be knowledgeable in the UNIX shell.<br /><em>Support for these instructions is <strong>not available</strong> from DreamHost tech support.</em><br /><strong><em>Server changes performed by DreamHost may break your modifications. You, as the user, are responsible for troubleshooting and resolving issues with your customizations.</em></strong> <strong><em><br /></em></strong></p>
</td>
</tr>
</tbody>
</table>
</div>
<p>This assumes you are deploying your rails application to your DreamHost server for the first time. See <a title="Ruby on Rails" href="http://wiki.dreamhost.com/Ruby_on_Rails">Ruby on Rails</a> for more information.</p>
<h2><span id="Set_up_sub-domain" class="mw-headline">Set up sub-domain</span></h2>
<ol>
<li><a class="external text" href="https://panel.dreamhost.com/index.cgi?tree=domain.manage&amp;current_step=Index&amp;next_step=ShowAddhttp&amp;domain=" rel="nofollow">Domains &gt; Manage Domains &gt; "Add Hosting to a Domain / Sub-Domain"</a>. (This will take a while to "cook" in the background, so do it first!)
<ul>
<li>Enable Passenger</li>
<li>append <tt>/current/public</tt> instead of just the default web directory. (Passenger suggests "/public"; the DH default is simply the domain name.)
<ul>
<li>USE: <tt>newapp.yourdomain.com/current/public</tt></li>
<li>and NOT: <tt>newapp.yourdomain.com</tt> or <tt>newapp.yourdomain.com/public</tt></li>
</ul>
</li>
</ul>
</li>
<li>After DNS allows access to your <tt><a class="external free" href="http://newapp.yourdomain.com/" rel="nofollow">http://newapp.yourdomain.com</a></tt> domain, manually delete the <tt>/current/public</tt> and <tt>/current</tt> directories that were created by DH.
<ul>
<li>This is so that later in this tutorial, <tt>cap deploy</tt> can create a <em>symlink</em> to <tt>/current</tt>, allowing Capistrano and Subversion to live happily together. Thanks to topfunky.com for the troubleshooting tip!</li>
</ul>
</li>
</ol>
<h2><span id="Set_up_new_database" class="mw-headline">Set up new database</span></h2>
<ol>
<li><a class="external text" href="https://panel.dreamhost.com/index.cgi?tree=goodies.mysql&amp;" rel="nofollow">Goodies &gt; MySQL</a> (This will also take a while to "cook")
<ul>
<li>Optionally, follow rails conventions for MySQL and create the dbname <tt>newapp_production</tt>.</li>
<li>Setup a server for the db: <tt>mysql.yourdomain.com</tt> (Rails calls this the <em>host</em>).</li>
<li>Take note of the <em>dbname</em>, <em>username</em> and <em>password</em> you setup, as you'll need this in your <tt>database.yml</tt></li>
</ul>
</li>
</ol>
<p><br />Your <tt>database.yml</tt> file should look something like this:</p>
<pre>development:
   # [...your development settings for local machine ...]
test:
   # [...your test settings for local machine ...]
production:
  adapter: mysql
  encoding: utf8
  database: newapp_production #following rails db naming convention
  username: newapp_dbo_user
  password: newapp_dbo_pass
  host: mysql.yourdomain.com
  port: 3306  #not necessary since its the standard mysql port
</pre>
<p><em><strong>Notes:</strong></em></p>
<p>By default your database.yml often comes generated with a socket connector. Don't use socket for Dreamhost.</p>
<p>Replace/comment out the socket:</p>
<pre>#socket: /var/run/mysqld/mysqld.sock 
</pre>
<p>and add the host (mysql server name setup in the panel) and port number:</p>
<pre>host: mysql.yourdomain.com
port: 3306
</pre>
<p>I included the port here for completeness; but since DH uses the standard mysql port, its technically not necessary.</p>
<h2><span id="Git" class="mw-headline">Git</span></h2>
<p>Deploying to DreamHost using Capistrano &amp; Git</p>
<p>Many of the instructions for using Capistrano are Subversion specific. Through much trial and error, I got Capistrano running with GitHub - given the fact that there isn't much information online, I thought I would post some tips and tricks here.</p>
<p><strong>1)</strong> The first trick is that new versions of Capistrano (I installed version 2.5.8) use a syntax that DreamHost's default version of Git complains about. The solution is to compile and install Git 1.6. Fortunately, another DreamHoster has very conviniently posted straightforward instructions on doing just this here:<a class="external free" href="http://blog.toppingdesign.com/2008/04/08/installing-git-on-dreamhost/" rel="nofollow">http://blog.toppingdesign.com/2008/04/08/installing-git-on-dreamhost/</a></p>
<p><strong>2)</strong> Now that you have Git 1.6 installed, you need to specifically tell Capistrano which version of git to use, both on the server and locally. Use these lines in your deploy.rb file to do just that:</p>
<p>set :scm_command, "~/packages/bin/git" #updated version of git on  server in user directory</p>
<p> set :local_scm_command, "/opt/local/bin/git" #correct path to local  git</p>
<p><br /><strong>3)</strong> Finally, you need to add the path to your installed version of Git 1.6 to your path. Typically, you would add the path to your .bash_profile file. However, this didn't seem to work for me - instead, for Capistrano I also needed a .bashrc file with your GEM PATH variable and with the path to your installed version of Git 1.6. Use these lines:</p>
<p><br />export GEM_HOME=$HOME/.gem</p>
<p>export GEM_PATH=$GEM_HOME:/usr/lib/ruby/gems/1.8</p>
<p>PATH=$PATH:~/packages/bin/</p>
<p>export PATH</p>
<h2><span id="Subversion" class="mw-headline">Subversion</span></h2>
<p>This step should happen after DH DNS has created your newapp.yourdomain.com and it resolves in your browser. If you do this step before that has happened, you may have to delete your subversion repository and recreate it agian.<br />Unless you intend to let Capistrano create your subversion repository elsewhere, you'll want to establish your subversion repository in <a class="external text" href="https://panel.dreamhost.com/index.cgi?tree=goodies.svn&amp;" rel="nofollow">Goodies &gt; Subversion</a> in DreamHost's control panel. (You can also set it up at another subversion host, if you wish. It makes sense to do it manually, if the host will not let Capistrano do it.)</p>
<h2><span id="Environment_Configuration" class="mw-headline">Environment Configuration</span></h2>
<p><strong>Important</strong>: Read the <a title="Ruby on Rails" href="http://wiki.dreamhost.com/Ruby_on_Rails">Ruby on Rails</a> page before you proceed, especially the "To set up Rails on a subdomain" section.</p>
<h3><span id="Force_Production_RAILS_ENV" class="mw-headline">Force Production RAILS_ENV</span></h3>
<p>Previously, it was recommended to uncomment the <code>RAILS_ENV</code> line in <tt>config/environment.rb</tt>. However, Dreamhost now defaults to 'production' environment, so this is no longer necessary. You can skip this step.</p>
<p>Typically, with a default rails app, the <code>RAILS_ENV</code> line comes commented out (#) in <tt>config/environment.rb</tt> file. Committing the environment.rb file with the line uncommented will cause havoc on your dev environment each time you update your code from the repository.</p>
<p>If you're using Capistrano, you can cleverly surpass this problem and force 'production' environment during deployment by add the following the task in your <tt>Capfile</tt>:</p>
<pre>desc "Restarting after deployment"
task :after_deploy, :roles =&gt; [:app, :db, :web] do
 run "sed 's/# ENV\\[/ENV\\[/g' #{deploy_to}/current/config/environment.rb &gt; #{deploy_to}/current/config/environment.temp"
 run "mv #{deploy_to}/current/config/environment.temp #{deploy_to}/current/config/environment.rb"
end
</pre>
<h3><span id="Fix_Dispatcher_Shebang.21" class="mw-headline">Fix Dispatcher Shebang!</span></h3>
<p>Modify the Ruby she-bang lines. Most are fine. The ones in <tt>public/dispatch.*</tt> are wrong. Change them to:</p>
<pre> #!/usr/bin/env ruby
</pre>
<p>Sometimes this is not correct. To make sure login the shell and try a "whereis ruby" or run "./dispatch.fcgi" yourself.</p>
<h3><span id="Fix_.htaccess_to_use_Dispatcher" class="mw-headline">Fix .htaccess to use Dispatcher</span></h3>
<p>In <tt>public/.htaccess</tt>, change the <tt>RewriteRule</tt> for the dispatcher to use the FastCGI dispatcher instead:</p>
<pre>RewriteRule ^(.*)$ dispatch.fcgi [QSA,L]
</pre>
<p>Add these rules immediately after <tt>RewriteEngine On</tt> to display a maintenance page if it exists on the file system:</p>
<pre>RewriteCond %{DOCUMENT_ROOT}/system/maintenance.html -f
RewriteCond %{SCRIPT_FILENAME} !maintenance.html
RewriteCond %{SCRIPT_FILENAME} !^(.+).(gif|jpg|css|js|swf)$
RewriteRule ^.*$ /system/maintenance.html [L]
</pre>
<h2><span id="Automate_Deployment_with_Capistrano_.28.22capify.22.29" class="mw-headline">Automate Deployment with Capistrano ("capify")</span></h2>
<p>From your <tt>RAILS_ROOT</tt>, execute the following commands:</p>
<pre>$ capify .
</pre>
<p>The above will create the two files ('Capfile' and 'deploy.rb') inside your rails root, that Capistrano uses to do deployment. The output should look something like this:</p>
<pre>[add] writing `./Capfile'
[add] writing `./config/deploy.rb'
[done] capified!
</pre>
<pre>$ svn add Capfile config/deploy.rb
</pre>
<p>The above line adds the new Capistrano files to your subversion repository.</p>
<p>Edit <tt>config/deploy.rb</tt>, setting <tt>:application</tt> and <tt>:repository</tt> properly. All roles should point to your newly created web host. <tt>:deploy_to</tt> should point to the top-level of the web directory you set up earlier (NOTE: leave <tt>current/public</tt> off the end). On DreamHost's shared hosts, <tt>sudo</tt> can't be used to restart the app. So set <tt>:use_sudo</tt> to <tt>false</tt>. Set <tt>:deploy_via</tt> to <tt>:export</tt> so as not to create a <tt>.svn</tt> in your world-accessible directory.</p>
<p>Your <tt>config/deploy.rb</tt> should resemble:</p>
<pre>set :user, 'dhuser'  # Your dreamhost account's username
set :domain, 'servername.dreamhost.com'  # Dreamhost servername where your account is located 
set :project, 'myapp_name_from_repository'  # Your application as its called in the repository
set :application, 'myapp.mydomain.com'  # Your app's location (domain or sub-domain name as setup in panel)
set :applicationdir, "/home/#{user}/#{application}"  # The standard Dreamhost setup

# version control config
set :scm_username, 'YOUR_SVN_USERNAME'
set :scm_password, 'YOUR_SVN_PASSWORD'
set :repository, "<a class="external free" href="http://svn.my_subversion_domain/#{project}/trunk/" rel="nofollow">http://svn.my_subversion_domain/#{project}/trunk/</a>"

# roles (servers)
role :web, domain
role :app, domain
role :db,  domain, :primary =&gt; true

# deploy config
set :deploy_to, applicationdir
set :deploy_via, :export

# additional settings
default_run_options[:pty] = true  # Forgo errors when deploying from windows
#ssh_options[:keys] = %w(/Path/To/id_rsa)            # If you are using ssh_keys
set :chmod755, "app config db lib public vendor script script/* public/disp*"
set :use_sudo, false
</pre>
<p>Note that the <code>db</code> role specifies where migrations should be run, not where the database is located. That's why the domain should be the one where you have shell access, not your database's domain.</p>
<p>If you've configured a SSH public/private key, you may set the <code>ssh_options[:keys]</code> variable to prevent Capistrano from asking for your password.</p>
<p>If you are using git for source control, be sure to add:</p>
<pre>set :scm, 'git'
set :repository,  "git@github.com:your_username/your_project.git"
set :deploy_via, :remote_cache
set :git_enable_submodules, 1 # if you have vendored rails
set :branch, 'master'
set :git_shallow_clone, 1
set :scm_verbose, true
</pre>
<h2><span id="Deployment_with_Capistrano" class="mw-headline">Deployment with Capistrano</span></h2>
<p><strong>NOTE: Commit the changes (covered above) in environment, config, and .htaccess / dispatch.* files to your subversion repository prior to deploying.</strong></p>
<h3><span id="Prepare_deploy_environment" class="mw-headline">Prepare deploy environment</span></h3>
<p>First setup server environment by running:</p>
<pre>cap deploy:setup
</pre>
<p><em><strong>Note:</strong></em> <code>cap deploy:setup</code> creates the releases and shared folders. Running cap migrate after might give you a file not found bash error as capistrano tries to cd the current folder; never mind this and simply skip to <code>cap deploy</code>.</p>
<p>If your repository and <code>config/deploy.rb</code> are set up properly, cap deploy will create a current <code>symlink</code> to the active release folder after exporting it from your repository.</p>
<h3><span id="Deploy" class="mw-headline">Deploy</span></h3>
<p>After setting up the environment, run a "cold" deployment (first time only):</p>
<pre>cap deploy:cold 
</pre>
<p>From then on, to deploy new versions, run:</p>
<pre>cap deploy
# or:
cap deploy:migrate
</pre>
<p>It might go without saying, but you'll need the command line version of Subversion installed on your development server for the above commands to work.</p>
<h3><span id="Maintenance_via_Capistrano" class="mw-headline">Maintenance via Capistrano</span></h3>
<p>To revert instantly from a disastrous deployment, run:</p>
<pre>cap deploy:rollback
</pre>
<p>If you need to stop for serious maintenance:</p>
<pre>cap deploy:web:disable
</pre>
<p>Run this when you're ready to face the world again:</p>
<pre>cap deploy:web:enable
</pre>
<p>Update your production server with latest changes from svn:</p>
<pre>cap deploy
#or: more explicitly...
cap deploy:stop
cap deploy:update
cap deploy:start
</pre>
<h3><span id="Miscellaneous_Tasks" class="mw-headline">Miscellaneous Tasks</span></h3>
<p>To see the tasks available to you, from your <tt>RAILS_ROOT</tt> run:</p>
<pre>$ cap -T
</pre>
<p>Will give you a listing of all the tasks available. Run the following for a specific task to get the description:</p>
<pre>$ cap -e [taskname]
</pre>
<h2><span id="Keep_Generated_Files_Between_Deployments" class="mw-headline">Keep Generated Files Between Deployments</span></h2>
<p>If your Rails app stores any files on the file system, these aren't kept in SVN so they will need to be kept such that they aren't lost when you re-deploy a new version. The "shared" directory is intended for this, and you can symlink files that you store under "shared" to where they belong within your deployment. You can use a Capistrano event hook to make a task for this in the <strong>Capfile</strong> so that this works transparently every time you re-deploy.</p>
<p>In this example, files that you want to appear at public/files/uploads are stored under shared/uploads:</p>
<pre>desc "Link shared files"
task :before_symlink do
  run "rm -drf #{release_path}/public/files/uploads"
  run "ln -s #{shared_path}/uploads #{release_path}/public/files/uploads"
end
</pre>
<p>The directory will now act like it's part of the current deployment, but won't be lost when you re-deploy.</p>
<h1><span id="Gotchas" class="mw-headline">Gotchas</span></h1>
<h2><span id="Setting_up_the_Migrations" class="mw-headline">Setting up the Migrations</span></h2>
<p>Be sure to use the username and password from the "production" section of your database.yml file to create a new user in the Dreamhost panel: Goodies/Manage MySQL. Check everything is running correctly by running cap deploy:migrations from your local computer, or ssh into the server and run</p>
<pre>rake RAILS_ENV=production db:migrate --trace
</pre>
<h2><span id="Default_shell" class="mw-headline">Default shell</span></h2>
<p>Note that Capistrano assumes your default shell is bash (or perhaps some other sh variant). If you get "if syntax" errors when attempting to deploy, this may be the problem. To fix it, log into the Dreamhost control panel and change your shell to bash.</p>
<h2><span id="Freezing_Rails_vs._Third_party_code" class="mw-headline">Freezing Rails vs. Third party code</span></h2>
<p>If you're freezing Rails for deployment (as is wise following the aborted debut of Rails 1.1 at DreamHost) you will need to take special precautions. One way is to set <tt>svn:externals</tt> on <tt>vendor/</tt> to <tt>rails <a class="external free" href="http://dev.rubyonrails.org/svn/rails/tags/rel_1-1-0" rel="nofollow">http://dev.rubyonrails.org/svn/rails/tags/rel_1-1-0</a></tt> (for Rails 1.0) instead of running <tt>rake freeze_gems</tt>. The downside is that your deployments will depend on dev.rubyonrails.org being reachable. Tracking your third party dependencies in your own repositories avoids this problem.</p>
<ul>
<li>Using <tt>svn:externals</tt> on <tt>vendor/</tt>: <a class="external text" href="http://woss.name/2006/03/29/ruby-on-rails-hosting/" rel="nofollow">Ruby on Rails hosting</a> (scroll down to the update)</li>
<li><a class="external text" href="http://woss.name/2006/03/31/the-disadvantage-of-svnexternals/" rel="nofollow">The disadvantage of 'svn:externals'</a></li>
</ul>
<h2><span id="cap_deploy_gets_stuck_.27subversion_is_asking_for_a_password.27" class="mw-headline">cap deploy gets stuck 'subversion is asking for a password'</span></h2>
<p>You need to make sure the account you’re using with Capistrano (i.e. your dreamhost account) can access your Subversion repository from the app server where the cap script is running. The solution seems to be to SSH into your dreamhost server and svn co your_repos into a temp directory. It’ll prompt you for the username and password, and once you’ve entered it successfully, it’ll remember it. Then you’ll be able to deploy without any problems.</p>
<h2><span id=".22svn_export.22_results_in_.27Killed_by_signal_15.27" class="mw-headline">"svn export" results in 'Killed by signal 15'</span></h2>
<p>If you are pulling your code from your local environment using svn+ssh:// URLs, you will likely get a "Killed by signal 15" error message:</p>
<p>Try running this command from your DreamHost server:</p>
<pre>svn list svn+ssh://username@offsite.com/abs/path/to/svn/repos/rails_apps/test_foo
foo
bar
config
...

Killed by signal 15
</pre>
<p>To get around this, you can change the ":deploy_via, :export" to ":deploy_via, :copy" which will do the local checkout and then push a tar.gz file to the DH server. This also works if you're not using DH svn server, or your svn repository is not accessible over the internet (ie: behind a firewall).</p>
<h1><span id="Resources" class="mw-headline">Resources</span></h1>
<ul>
<li><a class="external text" href="http://www.glennfu.com/2008/02/01/deploying-ruby-on-rails-with-capistrano-on-dreamhost/" rel="nofollow">Feb 2008 - Deploying Ruby on Rails with Capistrano on DreamHost</a></li>
<li><a class="external text" href="http://manuals.rubyonrails.com/read/chapter/97" rel="nofollow">Rails Manual: Capistrano</a></li>
<li><a class="external text" href="http://weblog.rubyonrails.org/articles/2006/03/06/capistrano-1-1" rel="nofollow">Capistrano 1.1 changes</a></li>
<li><a class="external text" href="http://railsmachine.com/screencasts/RailsMachineIntro.mov" rel="nofollow">RailsMachine video</a></li>
<li><a class="external text" href="http://nubyonrails.com/pages/shovel_dreamhost" rel="nofollow">Nuby on Rails Dreamhost Capistrano Writeup and Task</a></li>
<li><a class="external text" href="http://glu.ttono.us/articles/2006/06/23/capistrano-mike-clark" rel="nofollow">Notes on a June 2006 presentation of Capistrano by Mike Clark</a></li>
<li><a class="external text" href="http://casperfabricius.com/blog/2006/05/21/rails-on-dreamhost/" rel="nofollow">Deploying Rails with Edge and Engines to Dreamhost using Capistrano</a></li>
<li><a class="external text" href="http://blog.commonkitchen.com/2007/06/16/deploying-to-dreamhost-with-capistrano/" rel="nofollow">Deploying to Dreamhost with Capistrano</a></li>
<li><a class="external text" href="http://www.rubynoob.com/articles/2006/9/22/how-to-deploy-your-first-rails-app-to-dreamhost-using-capistrano-in-windows/" rel="nofollow">How To Deploy your first rails app to Dreamhost using Capistrano in Windows</a></li>
</ul>
<h1><span id="SwitchTower" class="mw-headline">SwitchTower</span></h1>
<p>Capistrano was known as SwitchTower until March 2006. <a class="external text" href="http://woss.name/author/mathie/" rel="nofollow">Graeme Mathieson</a>'s excellent quick-start guide for SwitchTower (the principal source for this article) can be found here: <a class="external text" href="http://woss.name/2006/01/22/using-switchtower-with-ruby-on-rails-and-dreamhost/" rel="nofollow">Using SwitchTower with Ruby on Rails and DreamHost</a>.</p>
